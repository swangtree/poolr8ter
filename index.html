<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>poolr8ter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-navy': '#1b1d36',
                        'soft-pink': '#fca6d1',
                        'off-white': '#e1e7eb',
                        'pastel-blue': '#99d6ea',
                        'daffodil-yellow': '#ffe9a1'
                    },
                    fontFamily: {
                        'mono': ['JetBrains Mono', 'monospace'],
                        'sans': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        html {
            overflow-y: scroll;
            scrollbar-width: thin;
            scrollbar-color: #fca6d1 transparent;
        }
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab-active {
            position: relative;
        }
        .tab-active::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #ff6b9d;
        }
        .hover-glow:hover {
            text-shadow: 0 0 8px rgba(255, 107, 157, 0.6);
            transition: text-shadow 0.2s ease;
        }
        
        /* Custom scrollbar styling for the whole page */
        body::-webkit-scrollbar {
            width: 8px;
        }
        
        body::-webkit-scrollbar-track {
            background: transparent;
        }
        
        body::-webkit-scrollbar-thumb {
            background-color: #fca6d1;
            border-radius: 4px;
        }
        
        body::-webkit-scrollbar-thumb:hover {
            background-color: #ff6b9d;
        }
        
        /* Firefox scrollbar styling */
        .custom-scrollbar {
            scrollbar-width: thin;
            scrollbar-color: #fca6d1 transparent;
        }

        /* Vertical separator for dashboard */
        .has-separator {
            position: relative;
        }
        .has-separator::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            width: 2px;
            background-color: rgba(252, 166, 209, 0.3); /* soft-pink with 30% opacity */
        }
    </style>
</head>
<body class="bg-dark-navy text-off-white min-h-screen font-sans" x-data="{
    activeTab: 'home', 
    isTrackingMatch: false,
    searchTerm: '',
    isPlayerListVisible: false,
    winner: null,
    players: [
        'Alexandra Chen',
        'Marcus Rodriguez',
        'Sarah Thompson',
        'David Kim',
        'Emily Johnson',
        'James Wilson',
        'Lisa Martinez'
    ],
    get filteredPlayers() {
        if (this.searchTerm === '') {
            return this.players;
        }
        return this.players.filter(player => {
            return player.toLowerCase().includes(this.searchTerm.toLowerCase());
        });
    }
}">
    <div class="container mx-auto px-6 py-8 max-w-6xl">
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-6xl font-bold text-soft-pink mb-2 tracking-tight hover-glow cursor-default">
                poolr8ter
            </h1>
        </header>

        <!-- Navigation Tabs -->
        <nav class="mb-8">
            <div class="flex justify-center space-x-8 border-b border-soft-pink/20 pb-2">
                <button 
                @click="activeTab = 'home'"
                :class="{ 'tab-active text-soft-pink': activeTab === 'home', 'text-off-white': activeTab !== 'home' }"
                class="font-medium px-4 py-2 hover:text-soft-pink hover-glow transition-colors duration-200">
                    Home/Track
                </button>
                <button 
                @click="activeTab = 'leaderboard'"
                :class="{ 'tab-active text-soft-pink': activeTab === 'leaderboard', 'text-off-white': activeTab !== 'leaderboard' }"
                class="font-medium px-4 py-2 hover:text-soft-pink hover-glow transition-colors duration-200">
                    Leaderboard
                </button>
                <button
                @click="activeTab = 'matches'"
                :class="{ 'tab-active text-soft-pink': activeTab === 'matches', 'text-off-white': activeTab !== 'matches' }"
                class="font-medium px-4 py-2 hover:text-soft-pink hover-glow transition-colors duration-200">
                    Matches
                </button>
                <button 
                @click="activeTab = 'account'"
                :class="{ 'tab-active text-soft-pink': activeTab === 'account', 'text-off-white': activeTab !== 'account' }"
                class="font-medium px-4 py-2 hover:text-soft-pink hover-glow transition-colors duration-200">
                    Account
                </button>
                <button 
                @click="activeTab = 'rules'"
                :class="{ 'tab-active text-soft-pink': activeTab === 'rules', 'text-off-white': activeTab !== 'rules' }"
                class="font-medium px-4 py-2 hover:text-soft-pink hover-glow transition-colors duration-200">
                    Rules
                </button>
            </div>
        </nav>

        <!-- Main Content Container -->
        <main class="border-2 border-soft-pink rounded-lg p-8 min-h-96">
            <!-- Home/Track Tab Content -->
            <div id="home-content" x-show="activeTab === 'home'" class="tab-content grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column (Main Content - 2/3 width) -->
                <div class="lg:col-span-2">
                    <!-- State 1: Initial View -->
                    <div x-show="!isTrackingMatch">
                        <h2 class="text-3xl font-bold text-soft-pink mb-6">Welcome to poolr8ter</h2>
                        <p class="text-off-white text-lg mb-8 leading-relaxed">
                            Track your pool matches, climb the leaderboard, and compete with friends in our ELO-based ranking system. 
                            Every game matters, every shot counts. Ready to make your mark on the felt?
                        </p>
                        <div class="flex justify-start">
                            <button @click="isTrackingMatch = true" class="bg-soft-pink hover:bg-soft-pink/90 text-dark-navy font-bold text-xl px-12 py-6 rounded-lg transition-all duration-300 hover:shadow-lg hover:shadow-soft-pink/20 transform hover:scale-105">
                                Track a New Match
                            </button>
                        </div>
                    </div>

                    <!-- State 2: Form View -->
                    <div x-show="isTrackingMatch">
                        <h2 class="text-3xl font-bold text-soft-pink mb-8">Report a New Match</h2>
                        
                        <form class="space-y-8">
                            <!-- Opponent Selection -->
                            <div>
                                <label for="opponent-search" class="block text-off-white font-medium mb-3 text-lg">Choose your Opponent</label>
                                <div class="relative" @click.away="isPlayerListVisible = false">
                                    <input 
                                        type="text" 
                                        id="opponent-search" 
                                        placeholder="Search for a player..."
                                        class="w-full bg-transparent border-2 border-soft-pink/50 rounded-lg px-4 py-3 text-off-white placeholder-off-white/50 focus:border-soft-pink focus:outline-none transition-colors duration-200"
                                        x-model="searchTerm"
                                        @focus="isPlayerListVisible = true"
                                        @keydown.escape.prevent="isPlayerListVisible = false"
                                    >
                                    <div x-show="isPlayerListVisible" x-transition class="absolute top-full left-0 right-0 mt-2 bg-dark-navy border-2 border-soft-pink/30 rounded-lg max-h-48 overflow-y-auto z-10">
                                        <template x-for="player in filteredPlayers" :key="player">
                                            <div @click="searchTerm = player; isPlayerListVisible = false" class="px-4 py-3 text-off-white hover:bg-soft-pink/10 cursor-pointer transition-colors duration-200" x-text="player">
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </div>

                            <!-- Winner Selection -->
                            <div>
                                <label class="block text-off-white font-medium mb-4 text-lg">Who Won?</label>
                                <div class="space-y-3">
                                    <label class="flex items-center cursor-pointer group">
                                        <input type="radio" name="winner" value="me" class="sr-only" x-model="winner">
                                        <div class="w-5 h-5 border-2 border-soft-pink/50 rounded-full mr-3 flex items-center justify-center group-hover:border-soft-pink transition-colors duration-200">
                                            <div class="w-2.5 h-2.5 bg-soft-pink rounded-full opacity-0 radio-dot transition-opacity duration-200" :class="{ 'opacity-100': winner === 'me' }"></div>
                                        </div>
                                        <span class="text-off-white group-hover:text-soft-pink transition-colors duration-200">Me</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer group">
                                        <input type="radio" name="winner" value="opponent" class="sr-only" x-model="winner">
                                        <div class="w-5 h-5 border-2 border-soft-pink/50 rounded-full mr-3 flex items-center justify-center group-hover:border-soft-pink transition-colors duration-200">
                                            <div class="w-2.5 h-2.5 bg-soft-pink rounded-full opacity-0 radio-dot transition-opacity duration-200" :class="{ 'opacity-100': winner === 'opponent' }"></div>
                                        </div>
                                        <span class="text-off-white group-hover:text-soft-pink transition-colors duration-200">My Opponent</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <div class="pt-4">
                                <button type="submit" class="bg-transparent border-2 border-soft-pink text-soft-pink font-bold py-3 px-8 rounded-lg hover:bg-soft-pink hover:text-dark-navy transition-all duration-300">
                                    Submit Match
                                </button>
                            </div>
                        </form>

                        <!-- Back Button -->
                        <div class="mt-8">
                            <button @click="isTrackingMatch = false" class="text-daffodil-yellow hover:text-daffodil-yellow/80 underline transition-colors duration-200">
                                ← Back to Dashboard
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Right Column (Sidebar) -->
                <div class="lg:col-span-1 border-l-2 border-soft-pink/30 pl-8">
                    <h3 class="text-xl font-bold text-soft-pink mb-6 uppercase tracking-wider">Top 5 Players</h3>
                    <ol class="space-y-4">
                        <li class="flex items-center justify-between text-off-white">
                            <div class="flex items-center">
                                <span class="font-mono text-soft-pink w-6">1.</span>
                                <span class="ml-3">Alexandra Chen</span>
                            </div>
                            <span class="font-mono text-daffodil-yellow">1847</span>
                        </li>
                        <li class="flex items-center justify-between text-off-white">
                            <div class="flex items-center">
                                <span class="font-mono text-soft-pink w-6">2.</span>
                                <span class="ml-3">Marcus Rodriguez</span>
                            </div>
                            <span class="font-mono text-daffodil-yellow">1723</span>
                        </li>
                        <li class="flex items-center justify-between text-off-white">
                            <div class="flex items-center">
                                <span class="font-mono text-soft-pink w-6">3.</span>
                                <span class="ml-3">Sarah Thompson</span>
                            </div>
                            <span class="font-mono text-daffodil-yellow">1689</span>
                        </li>
                        <li class="flex items-center justify-between text-off-white">
                            <div class="flex items-center">
                                <span class="font-mono text-soft-pink w-6">4.</span>
                                <span class="ml-3">David Kim</span>
                            </div>
                            <span class="font-mono text-daffodil-yellow">1542</span>
                        </li>
                        <li class="flex items-center justify-between text-off-white">
                            <div class="flex items-center">
                                <span class="font-mono text-soft-pink w-6">5.</span>
                                <span class="ml-3">Emily Johnson</span>
                            </div>
                            <span class="font-mono text-daffodil-yellow">1498</span>
                        </li>
                    </ol>
                </div>
            </div>

            <!-- Leaderboard Tab Content -->
            <div id="leaderboard-content" x-show="activeTab === 'leaderboard'" class="tab-content">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-soft-pink">
                                <th class="text-left py-4 px-2 text-soft-pink uppercase tracking-wider text-sm font-medium w-16">Rank</th>
                                <th class="text-left py-4 px-4 text-soft-pink uppercase tracking-wider text-sm font-medium">Player</th>
                                <th class="text-left py-4 px-2 text-soft-pink uppercase tracking-wider text-sm font-medium w-24">ELO</th>
                                <th class="text-left py-4 px-2 text-soft-pink uppercase tracking-wider text-sm font-medium w-20">Wins</th>
                                <th class="text-left py-4 px-2 text-soft-pink uppercase tracking-wider text-sm font-medium w-20">Losses</th>
                                <th class="text-left py-4 px-2 text-soft-pink uppercase tracking-wider text-sm font-medium w-20">Win %</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="hover:bg-dark-navy/20 transition-colors duration-200">
                                <td class="py-4 px-2 text-off-white font-mono">1</td>
                                <td class="py-4 px-4 text-off-white">Alexandra Chen</td>
                                <td class="py-4 px-2 text-off-white font-mono">1847</td>
                                <td class="py-4 px-2 text-off-white">42</td>
                                <td class="py-4 px-2 text-off-white">8</td>
                                <td class="py-4 px-2 text-off-white">84%</td>
                            </tr>
                            <tr class="hover:bg-dark-navy/20 transition-colors duration-200">
                                <td class="py-4 px-2 text-off-white font-mono">2</td>
                                <td class="py-4 px-4 text-off-white">Marcus Rodriguez</td>
                                <td class="py-4 px-2 text-off-white font-mono">1723</td>
                                <td class="py-4 px-2 text-off-white">38</td>
                                <td class="py-4 px-2 text-off-white">12</td>
                                <td class="py-4 px-2 text-off-white">76%</td>
                            </tr>
                            <tr class="hover:bg-dark-navy/20 transition-colors duration-200">
                                <td class="py-4 px-2 text-off-white font-mono">3</td>
                                <td class="py-4 px-4 text-off-white">Sarah Thompson</td>
                                <td class="py-4 px-2 text-off-white font-mono">1689</td>
                                <td class="py-4 px-2 text-off-white">35</td>
                                <td class="py-4 px-2 text-off-white">15</td>
                                <td class="py-4 px-2 text-off-white">70%</td>
                            </tr>
                            <tr class="hover:bg-dark-navy/20 transition-colors duration-200">
                                <td class="py-4 px-2 text-off-white font-mono">4</td>
                                <td class="py-4 px-4 text-off-white">David Kim</td>
                                <td class="py-4 px-2 text-off-white font-mono">1542</td>
                                <td class="py-4 px-2 text-off-white">29</td>
                                <td class="py-4 px-2 text-off-white">18</td>
                                <td class="py-4 px-2 text-off-white">62%</td>
                            </tr>
                            <tr class="hover:bg-dark-navy/20 transition-colors duration-200">
                                <td class="py-4 px-2 text-off-white font-mono">5</td>
                                <td class="py-4 px-4 text-off-white">Emily Johnson</td>
                                <td class="py-4 px-2 text-off-white font-mono">1498</td>
                                <td class="py-4 px-2 text-off-white">26</td>
                                <td class="py-4 px-2 text-off-white">19</td>
                                <td class="py-4 px-2 text-off-white">58%</td>
                            </tr>
                            <tr class="hover:bg-dark-navy/20 transition-colors duration-200">
                                <td class="py-4 px-2 text-off-white font-mono">6</td>
                                <td class="py-4 px-4 text-off-white">James Wilson</td>
                                <td class="py-4 px-2 text-off-white font-mono">1367</td>
                                <td class="py-4 px-2 text-off-white">22</td>
                                <td class="py-4 px-2 text-off-white">23</td>
                                <td class="py-4 px-2 text-off-white">49%</td>
                            </tr>
                            <tr class="hover:bg-dark-navy/20 transition-colors duration-200">
                                <td class="py-4 px-2 text-off-white font-mono">7</td>
                                <td class="py-4 px-4 text-off-white">Lisa Martinez</td>
                                <td class="py-4 px-2 text-off-white font-mono">1289</td>
                                <td class="py-4 px-2 text-off-white">18</td>
                                <td class="py-4 px-2 text-off-white">27</td>
                                <td class="py-4 px-2 text-off-white">40%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Matches Tab Content -->
            <div id="matches-content" x-show="activeTab === 'matches'" class="tab-content">
                <h2 class="text-3xl font-bold text-soft-pink mb-8">My Match History</h2>
                
                <div class="max-h-96 overflow-y-auto pr-2">
                    <ol class="space-y-6">
                    <!-- Match 1 - Victory -->
                    <li class="border-b border-soft-pink/30 pb-6">
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <span class="text-2xl font-bold text-pastel-blue">VICTORY</span>
                                <span class="text-pastel-blue font-mono text-lg">+15 ELO</span>
                            </div>
                            <div class="text-off-white text-lg">vs. Marcus Rodriguez</div>
                            <div class="text-off-white/70 text-sm">January 15, 2025</div>
                        </div>
                    </li>
                    
                    <!-- Match 2 - Defeat -->
                    <li class="border-b border-soft-pink/30 pb-6">
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <span class="text-2xl font-bold text-soft-pink">DEFEAT</span>
                                <span class="text-soft-pink font-mono text-lg">-12 ELO</span>
                            </div>
                            <div class="text-off-white text-lg">vs. Alexandra Chen</div>
                            <div class="text-off-white/70 text-sm">January 12, 2025</div>
                        </div>
                    </li>
                    
                    <!-- Match 3 - Victory -->
                    <li class="border-b border-soft-pink/30 pb-6">
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <span class="text-2xl font-bold text-pastel-blue">VICTORY</span>
                                <span class="text-pastel-blue font-mono text-lg">+18 ELO</span>
                            </div>
                            <div class="text-off-white text-lg">vs. Sarah Thompson</div>
                            <div class="text-off-white/70 text-sm">January 10, 2025</div>
                        </div>
                    </li>
                    
                    <!-- Match 4 - Defeat -->
                    <li class="pb-6">
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <span class="text-2xl font-bold text-soft-pink">DEFEAT</span>
                                <span class="text-soft-pink font-mono text-lg">-8 ELO</span>
                            </div>
                            <div class="text-off-white text-lg">vs. David Kim</div>
                            <div class="text-off-white/70 text-sm">January 8, 2025</div>
                        </div>
                    </li>
                    </ol>
                </div>
            </div>
            
            <!-- Account Tab Content -->
            <div id="account-content" x-show="activeTab === 'account'" class="tab-content">
                <div class="text-center max-w-md mx-auto">
                    <h2 class="text-3xl font-bold text-soft-pink mb-8">Account</h2>
                    
                    <!-- This div will be shown to logged-out users -->
                    <div id="logged-out-view">
                        <p class="text-off-white mb-6">Please log in or sign up to continue.</p>
                        <button id="login-btn" class="bg-soft-pink hover:bg-soft-pink/90 text-dark-navy font-bold text-lg px-8 py-4 rounded-lg transition-colors duration-300">
                            Login or Sign Up
                        </button>
                    </div>

                    <!-- This div will be shown to logged-in users -->
                    <div id="logged-in-view" class="hidden">
                        <p class="text-2xl text-off-white mb-4">Welcome, <span id="username-display" class="text-daffodil-yellow">user</span>!</p>
                        <p class="text-lg text-off-white/80 mb-8">Your current ELO is <span id="elo-display" class="font-mono text-pastel-blue">1200</span>.</p>
                        <button id="logout-btn" class="bg-transparent border-2 border-soft-pink text-soft-pink font-bold py-3 px-8 rounded-lg hover:bg-soft-pink hover:text-dark-navy transition-all duration-300">
                            Logout
                        </button>
                    </div>

                    <!-- This is the container where the Supabase Auth UI will be injected -->
                    <div id="auth-ui-container" class="mt-8"></div>
                </div>
            </div>
            
            <!-- Rules Tab Content -->
            <div id="rules-content" x-show="activeTab === 'rules'" class="tab-content">
                <div class="max-w-2xl mx-auto">
                    <h2 class="text-3xl font-bold text-soft-pink mb-8 text-center">Pool Rules Guide</h2>

                    <!-- This is the container for the interactive guide -->
                    <div id="rules-container">
                        <div class="rule-step">
                            <p class="text-xl text-off-white mb-6 text-center">Is it the start of the game (the break shot)?</p>
                            <div class="flex justify-center gap-4">
                                <button class="bg-pastel-blue text-dark-navy font-bold px-6 py-3 rounded-lg">Yes</button>
                                <button class="bg-pastel-blue text-dark-navy font-bold px-6 py-3 rounded-lg">No</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="mt-12 text-center">
            <p class="text-off-white/50 text-sm">
                Built for competitive pool players • 
                <a href="#" class="text-daffodil-yellow hover:text-daffodil-yellow/80 transition-colors duration-200">
                    GitHub
                </a>
            </p>
        </footer>
    </div>
</body>
</html>